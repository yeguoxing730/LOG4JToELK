step1: install elastic seach 5.4.3
   elasticsearch-service.bat install
   elasticsearch-service.bat manager
设置为自启动 127.0.0.1:9200

step2:install  logstash-2.4.1
cd logstash/bin
a.config
vi log4j_es.conf
input {
    log4j {
        host => "127.0.0.1"
        port => 4560
    }
}

output {
    stdout {
      codec => rubydebug
    }
    elasticsearch{
        hosts => ["127.0.0.1:9200"]
        index => "log4j-%{+YYYY.MM.dd}"
        document_type => "log4j_type"
    }
}
b.vi run.bat
 logstash.bat -f log4j_es.conf
C.install service
nssm.exe  install logstash
在弹出的界面设置 Path为run.bat,Details选项卡设置显示名，Dependencies选项卡设置依赖服务 elasticsearch-service-x64

step3:install kibana
vi conf/kibana.yml
 elasticsearch.url: "http://127.0.0.1:9200"
 server.port: 5601
 server.host: 127.0.0.1
 kibana.index: ".kibana"
nssm.exe  install kibana
安装服务的Path为kibana.bat，依赖项可以设置
elasticsearch-service-x64
logstash

点击我的电脑-》右键 管理-》 服务  可以看到刚才装的三个服务，可以按照 es -logstash -<kibana 顺序启动起来

http://www.ttlsa.com/log-system/troubleshooting-elk-common-issues/

https://www.cnblogs.com/davidgu/p/6639307.html